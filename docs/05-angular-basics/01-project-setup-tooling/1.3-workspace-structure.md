# 1.3 Workspace Structure (Apps + Libraries)

**Branch: `1-3-workspace-structure`**

Angular workspaces support multiple applications and shareable libraries for scalable monorepos. This structure enables code reuse across projects and optimized builds.

## Create Workspace

```bash
# Create empty workspace (no default app)
ng new practice-workspace --no-create-application --skip-install

cd practice-workspace
```

## Generate Multiple Applications

```bash
# Main application
ng generate application main-app --routing --style=scss --standalone

# Admin dashboard app
ng generate application admin --routing --standalone

# Mobile-first app
ng generate application mobile --routing --ssr --standalone
```

## Generate Shareable Libraries

```bash
# UI components library
ng generate library ui-kit --standalone --prefix=kit

# Shared utilities
ng generate library shared-utils

# Feature-specific library
ng generate library heroes --standalone
```

## Complete Workspace Structure

```
practice-workspace/
├── apps/
│   ├── main-app/          # Primary app
│   ├── admin/             # Admin panel
│   └── mobile/            # Mobile app
├── libs/
│   ├── ui-kit/            # Reusable components
│   ├── shared-utils/      # Utilities/services
│   └── heroes/            # Domain library
├── angular.json           # Workspace config
├── tsconfig.json          # Root TypeScript
└── workspace.json         # Legacy (deprecated)
```

## Library Usage in Apps

**1. Import in app.component.ts:**

```typescript
// apps/main-app/src/app/app.component.ts
import { Component } from "@angular/core";
import { ButtonComponent } from "@practice-workspace/ui-kit"; // Library import

@Component({
  standalone: true,
  imports: [ButtonComponent],
  template: `<kit-button label="Click me">Content</kit-button>`,
})
export class AppComponent {}
```

**2. Update tsconfig paths (auto-generated):**

```json
// tsconfig.json
{
  "compilerOptions": {
    "paths": {
      "@practice-workspace/ui-kit": ["dist/ui-kit"]
    }
  }
}
```

## Build & Serve Commands

```bash
# Serve specific app
ng serve main-app
ng serve admin --port 4201

# Build specific app
ng build main-app --configuration production

# Build library only
ng build ui-kit --watch

# Build everything
ng build --all

# Affected builds (changed projects only)
ng build --affected
```

## Angular.json Workspace Config

```json
{
  "version": 1,
  "projects": {
    "main-app": {
      "projectType": "application",
      "architect": {
        "build": {
          "builder": "@angular-devkit/build-angular:application",
          "options": {
            "outputPath": "dist/main-app"
          }
        }
      }
    },
    "ui-kit": {
      "projectType": "library",
      "architect": {
        "build": {
          "builder": "@angular-devkit/build-angular:ng-packagr-lite",
          "options": {
            "project": "libs/ui-kit/ng-package.json"
          }
        }
      }
    }
  }
}
```

## Library Public API (index.ts)

**libs/ui-kit/src/index.ts:**

```typescript
// Re-export for tree-shakable imports
export * from "./lib/button/button.component";
export * from "./lib/card/card.component";
export { UI_KIT_COMPONENTS } from "./lib/ui-kit.exports";
```

**Generate with export flag:**

```bash
ng generate @angular/core:export --from=libs/ui-kit/src --to=libs/ui-kit/src/index.ts
```

## Development Workflow

```bash
# 1. Build library in watch mode (terminal 1)
ng build ui-kit --watch

# 2. Serve main app (terminal 2)
ng serve main-app

# 3. Tests for library
ng test ui-kit

# 4. Lint everything
ng lint --all
```

## Library Publishing (Optional)

```bash
# Build for npm
ng build ui-kit --configuration production

# Copy to dist for npm publish
cp README.md LICENSE package.json dist/ui-kit/
npm publish dist/ui-kit
```

## Best Practices Checklist

| Practice                             | ✅ Status |
| ------------------------------------ | --------- |
| Prefix libraries (`kit-`, `shared-`) | [ ]       |
| Use `standalone: true` in libraries  | [ ]       |
| Public API via `index.ts` exports    | [ ]       |
| `--watch` for library development    | [ ]       |
| Path mappings in `tsconfig.json`     | [ ]       |

## Verify Setup Checklist

**✅ Complete when:**

- [ ] Workspace with 2 apps + 2 libraries created
- [ ] Library components used in main app
- [ ] `ng build ui-kit --watch` rebuilds on changes
- [ ] `ng serve main-app` shows library components
- [ ] Path imports work (`@practice-workspace/ui-kit`)
- [ ] `ng build --all` succeeds

**Demo files created:**

```
1-3-workspace-structure/
├── apps/main-app/src/app/app.component.ts     # Uses library
├── libs/ui-kit/src/lib/button/button.component.ts
├── libs/ui-kit/projects.json
└── angular.json                               # Multi-project config
```

**Next: `1-4-strict-mode-typescript-config.md`** - Type safety & configuration mastery!
